<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Movimentos - ChessEst</title>
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="bootstrap.js"></script>
    <script type="text/javascript" src="bootstrap.min.js"></script>
    <script type="text/javascript" src="chessboard-1.0.0.js"></script>
    <script type="text/javascript" src="Chess.js"></script>
    <link rel="stylesheet" type="text/css" href="bootstrap.css">
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="chessboard-1.0.0.css">
    <link rel="stylesheet" type="text/css" href="myStyle.css">
</head>
<body>
    <div class="row">
        <h1> Movimentos das peças</h1>
    </div>
    <br>
    <br>
    <div class="row" style="text-align: center;">
        <div class="col-lg-8 col-xs-8">
            <div class ="col-xs-2 col-md-2">
                <img id="Peao" class="chessImage" src="img/chesspieces/wikipedia/wP.png" class="rounded-circle" name = "Peao" value="P" alt="Peão">
            </div>
            <div class ="col-xs-2 col-md-2">
                <img id="Cavalo" class="chessImage" src="img/chesspieces/wikipedia/wN.png" class="rounded-circle" name = "Cavalo" value="N" alt="Cavalo">
            </div>

            <div class ="col-xs-2 col-md-2">
                <img id="Bispo" class="chessImage" src="img/chesspieces/wikipedia/wB.png" class="rounded-circle" name = "Bispo" value="B" alt="Bispo">
            </div>
            <div class ="col-xs-2 col-md-2">
                <img id="Torre" class="chessImage" src="img/chesspieces/wikipedia/wR.png" class="rounded-circle" name = "Torre" value="R" alt="Torre">
            </div>

            <div class ="col-xs-2 col-md-2">
                <img id="Rainha" class="chessImage" src="img/chesspieces/wikipedia/wQ.png" class="rounded-circle" name = "Rainha" value="Q" alt="Rainha">
            </div>
            <div class ="col-xs-2 col-md-2">
                <img id="Rei" class="chessImage" src="img/chesspieces/wikipedia/wK.png" class="rounded-circle" name = "Rei" value="K" alt="Rei">
            </div>
            <br>
            <br>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-xs-8 col-md-8" id="mostrInfos">
            <h1 id="titulo"> Clica nas peças para saber mais informações! </h1>
            <br>
            <div id="mostraInfos" hidden>
                <div class="row" style="text-align: center">
                    <div class="col-xs-6 col-md-6">
                        <div class="" id="textBox">

                        </div>
                    </div>
                    <div class="col-xs-6 col-md-6">
                        <img id="imgBranca" class="rounded-circle imgApresentation" style="background: black;">
                        <img id="imgPreta"  class="rounded-circle imgApresentation" style="background: white;">
                    </div>
                </div>
            </div>
         </div>
        <div class="col-xs-4 col-md-4">
            <div id="myBoard" name="myBoard" style="width: 400px"></div>
        </div>

    </div>
</body>
<script>
    var timer;

    var config = {
        position: 'start'
    }

    function piscar(id){
            $('#'+id).fadeOut(1000);
            $('#'+id).fadeIn(1000);
    }

    function randomMoves(game,board){
        function makeRandomMove () {
            var possibleMoves = game.moves();

            var randomIdx = Math.floor(Math.random() * possibleMoves.length)
            game.move(possibleMoves[randomIdx]);
            board.position(game.fen());

            timer =  window.setTimeout(makeRandomMove, 2000);
        }

        window.setTimeout(makeRandomMove, 1000);
    }

    $(document).ready(function(){
        $(".chessImage").mouseover(function(){
           $(".chessImage").css('border-color', "white");
           $("#"+this.name).css('border-color', "red");
           $(this).addClass('flipped');
    }).mouseleave(function(){

    });

        var game = new Chess();
        var board = Chessboard('myBoard',  config);

        $(".chessImage").click(function(){
            $("#"+this.name).css('border-color', "green");
            $("#titulo").text( this.name);
            $("#mostraInfos").attr("hidden",false);
            $("#imgBranca").attr("src","img/w"+this.getAttribute("value")+".jpg");
            $("#imgPreta").attr("src","img/b"+this.getAttribute("value")+".jpg");
            setInterval(1000,function(){
                piscar("imgBranca");
                piscar("imgPreta");

            });
            game.clear();
            clearTimeout(timer);


            if(this.name=="Peao"){
                game.load("1k6/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/2K5 b - - 0 1");
                $("#textBox").append("<p>Este é o peão. O Peão é uma peça menor do xadrez e move-se de uma forma especial. Na primeira jogada pode avançar 1 ou 2 casas, a apartir daí apenas 1 casa. O seu movimento de captura é para as diagonais.  A nivel de pontuação o peão é a peça com menor valor, apenas 1 ponto, face aos 10 pontos da rainha. Quando o peão chega ao outro lado do tabuleiro, podes pedir outra peça de maior valor.</p>")
            }else if(this.name=="Cavalo"){
                game.load('1n2k1n1/8/8/8/8/8/8/1N2K1N1 b - - 0 1');
            }else if(this.name=="Bispo"){
                game.load('1b2k1b1/8/8/8/8/8/8/2B1KB2 w - - 0 1');
            }else if(this.name=="Torre"){
                game.load('r3k2r/8/8/8/8/8/8/R3K2R w - - 0 1');
            }else if(this.name=="Rainha"){
                game.load('3qk3/8/8/8/8/8/8/3QK3 b - - 0 1');
            }else if(this.name == "Rei"){
                game.load('8/3k4/2p5/1pP5/pP1K4/P7/8/8 b - - 0 1');
            }
            randomMoves(game,board);

        });
    });




</script>
</html>